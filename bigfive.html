<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MBTI Personality Test</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #fff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }


    .question {
      margin-bottom: 20px;
    }

    .options {
      list-style: none;
      padding: 0;
    }

    .options li {
      margin: 10px 0;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #CECABA;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
    }

    button:hover {
      background-color: steelblue;
    }
  </style>
</head>
<body>
    <header>
        <img src="img/logo.png" alt="Logo">
        <div>Night Owl</div>
        <nav>
            <ul class="menu">
              <li><a href="#">Trang chủ</a></li>
              <li>
                <a href="#">Bài test tâm lý</a>
                <ul class="submenu">
                  <li><a href="#">Bài test MBTI</a></li>
                  <li><a href="#">Bài test DISC</a></li>
                  <li><a href="#">Bài test HOLLAND</a></li>
                  <li><a href="#">Bài test BIG FIVE</a></li>
                </ul>
              </li>
              <li>
                <a href="#">Bài test trí tuệ & cảm xúc</a>
                <ul class="submenu">
                  <li><a href="#">Bài test IQ</a></li>
                  <li><a href="#">Bài test EQ</a></li>
                </ul>
              </li>
              <li><a href="post.html">Bài viết</a></li>
              <li id="user-menu">
                <a href="login.html">Đăng nhập</a>
              </li>
            </ul>
          </nav>
    </header>

  <div class="container">
    <div id="test-container"></div>
    <button id="submit" onclick="submitTest()">Submit</button>
    <div id="result-container"></div>
  </div>
  

  <footer>
    <div class="menuF">
      <div>
        <img src="img/logo.png" alt="" width="100px" height="100px">
        <p>"Night Owl – Thức cùng bạn, hiểu chính mình."</p>
      </div>
      <div>
        <h1>CÁC BÀI TEST</h1>
        <p>Bài test MBTI</p>
        <p>Bài test DISC</p>
        <p>Bài test HOLLAND</p>
        <p>Bài test BIG FIVE</p>
        <p>Bài test IQ</p>
        <p>Bài test EQ</p>
      </div>
      <div>
        <h1>LIÊN HỆ VỚI CHÚNG TÔI</h1>
        <p>Phone: 0904 693 310</p>
        <p>Email: nightowl@gmail.com</p>
      </div>
    </div>
    <hr>
    <div class="end">
      © 2025 Night Owl. All rights reserved.
    </div>
  </footer>

  <script>
document.addEventListener('DOMContentLoaded', function() {
  // Lấy dữ liệu từ API
  fetch('http://127.0.0.1:8000/v1/test/67f22baed22a5af8015cf86b')
    .then(response => response.json())
    .then(data => {
      renderTest(data);
    })
    .catch(error => console.error('Error fetching the test data:', error));
});

function renderTest(testData) {
  const testContainer = document.getElementById('test-container');
  testContainer.innerHTML = ''; // Xóa nội dung cũ

  const title = document.createElement('h2');
  title.innerText = testData.title;
  testContainer.appendChild(title);

  testData.questions.forEach((question, index) => {
    const questionElement = document.createElement('div');
    questionElement.classList.add('question');

    const questionText = document.createElement('p');
    questionText.innerText = question.question;
    questionElement.appendChild(questionText);

    const optionsList = document.createElement('ul');
    optionsList.classList.add('options');

    question.options.forEach(option => {
      const optionItem = document.createElement('li');

      const optionLabel = document.createElement('label');
      const optionInput = document.createElement('input');
      optionInput.type = 'radio';
      optionInput.name = 'question-' + index;
      optionInput.value = option.value;

      optionLabel.appendChild(optionInput);
      optionLabel.appendChild(document.createTextNode(' ' + option.text));

      optionItem.appendChild(optionLabel);
      optionsList.appendChild(optionItem);
    });

    questionElement.appendChild(optionsList);
    testContainer.appendChild(questionElement);
  });
}



function submitTest() {
  const traitCounts = {
    O: 0, // Openness
    C: 0, // Conscientiousness
    E: 0, // Extraversion
    A: 0, // Agreeableness
    N: 0  // Neuroticism
  };

  const questions = document.querySelectorAll('.question'); // Tất cả câu hỏi
  let answeredCount = 0; // Đếm số câu hỏi đã trả lời

  questions.forEach((question, index) => {
    const selectedOption = question.querySelector(`input[name="question-${index}"]:checked`);
    if (selectedOption && selectedOption.value) {
      answeredCount++;
      const value = selectedOption.value; // Lấy giá trị của radio button
      const trait = value[0];  // O, C, E, A, N (trait)
      const direction = value[1];  // + hoặc - (chiều của trait)

      if (traitCounts[trait] !== undefined) {
        traitCounts[trait] += direction === '+' ? 1 : -1;  // Tính điểm
      }
    }
  });

  // Kiểm tra số lượng câu hỏi đã trả lời
  if (answeredCount < questions.length) {
    alert("Vui lòng hoàn thành tất cả các câu hỏi trước khi nộp bài.");
    return;
  }

  // Hiển thị kết quả
  showResultBigFive(traitCounts);  // Hiển thị kết quả bài kiểm tra
}

function showResultBigFive(traitCounts) {
  const resultContainer = document.getElementById('result-container');
  resultContainer.innerHTML = '';  // Xóa nội dung cũ

  const result = document.createElement('div');
  result.innerHTML = `
    <h3>Kết quả bài kiểm tra Big Five:</h3>
    
    <p><strong>Openness (O):</strong> ${traitCounts.O} - ${traitCounts.O >= 0 ? 'Cao' : 'Thấp'}</p>
    <div>
      ${traitCounts.O >= 0 ? `
        <p><strong>Điểm cao:</strong> Người có điểm cao trong yếu tố này thường rất sáng tạo, tò mò và thích khám phá những điều mới lạ. Họ cởi mở với các ý tưởng và trải nghiệm mới, thích khám phá và tìm kiếm sự khác biệt trong mọi tình huống.</p>
        <p><strong>Tính cách:</strong> Họ yêu thích nghệ thuật, các hoạt động trí tuệ và có xu hướng muốn học hỏi những điều mới trong cuộc sống.</p>
      ` : `
        <p><strong>Điểm thấp:</strong> Người có điểm thấp trong yếu tố này thường ít thay đổi và rất thực tế. Họ ưa chuộng những phương thức quen thuộc, không thích sự thay đổi và cảm thấy thoải mái trong môi trường ổn định, truyền thống.</p>
        <p><strong>Tính cách:</strong> Họ tập trung vào thực tế và có xu hướng bảo thủ trong việc tiếp cận các vấn đề, thích sự an toàn và ít quan tâm đến những điều mới mẻ.</p>
      `}
    </div>

    <p><strong>Conscientiousness (C):</strong> ${traitCounts.C} - ${traitCounts.C >= 0 ? 'Cao' : 'Thấp'}</p>
    <div>
      ${traitCounts.C >= 0 ? `
        <p><strong>Điểm cao:</strong> Người có điểm cao trong yếu tố này thường rất kỷ luật, có kế hoạch và chú trọng đến việc hoàn thành công việc một cách hiệu quả. Họ có thói quen tổ chức tốt, chịu trách nhiệm và luôn hoàn thành những gì đã đề ra.</p>
        <p><strong>Tính cách:</strong> Họ có xu hướng làm việc có mục tiêu và rất chú trọng vào chi tiết, không thích bỏ qua bất kỳ công việc nào.</p>
      ` : `
        <p><strong>Điểm thấp:</strong> Người có điểm thấp trong yếu tố này thường ít chú trọng đến việc tổ chức và kỷ luật. Họ có thể dễ dàng bị phân tâm và ít có thói quen lập kế hoạch. Những người này có thể làm việc theo cảm hứng hoặc thậm chí trì hoãn công việc.</p>
        <p><strong>Tính cách:</strong> Họ có thể dễ dàng bỏ qua các bước cần thiết để hoàn thành một công việc và không thích gò bó trong kế hoạch.</p>
      `}
    </div>

    <p><strong>Extraversion (E):</strong> ${traitCounts.E} - ${traitCounts.E >= 0 ? 'Cao' : 'Thấp'}</p>
    <div>
      ${traitCounts.E >= 0 ? `
        <p><strong>Điểm cao:</strong> Người có điểm cao trong yếu tố này rất năng động, thích giao tiếp và hướng ra ngoài. Họ có thể dễ dàng kết nối với người khác và thích tham gia vào các hoạt động xã hội. Họ cảm thấy thoải mái trong môi trường đông người và có xu hướng chủ động trong các tình huống xã hội.</p>
        <p><strong>Tính cách:</strong> Họ rất hướng ngoại, thích thể hiện bản thân và dễ dàng thể hiện cảm xúc với người khác.</p>
      ` : `
        <p><strong>Điểm thấp:</strong> Người có điểm thấp trong yếu tố này thường là người hướng nội, thích sự yên tĩnh và không thoải mái trong các tình huống xã hội. Họ thích dành thời gian một mình hoặc chỉ giao tiếp với một số ít người thân thiết.</p>
        <p><strong>Tính cách:</strong> Họ thích không gian riêng tư và cảm thấy thoải mái trong những tình huống ít sự kiện xã hội. Họ không có nhu cầu giao tiếp quá nhiều và thích suy nghĩ một mình.</p>
      `}
    </div>

    <p><strong>Agreeableness (A):</strong> ${traitCounts.A} - ${traitCounts.A >= 0 ? 'Cao' : 'Thấp'}</p>
    <div>
      ${traitCounts.A >= 0 ? `
        <p><strong>Điểm cao:</strong> Người có điểm cao trong yếu tố này rất hòa đồng, tử tế và sẵn sàng giúp đỡ người khác. Họ dễ dàng xây dựng các mối quan hệ và luôn cố gắng tạo ra sự hài hòa trong mọi tình huống. Họ ưu tiên sự đồng cảm và thông cảm trong mọi quan hệ.</p>
        <p><strong>Tính cách:</strong> Họ hiền hòa, dễ chịu, sẵn sàng hợp tác và ít khi tranh cãi.</p>
      ` : `
        <p><strong>Điểm thấp:</strong> Người có điểm thấp trong yếu tố này thường rất cứng rắn và bảo vệ quan điểm cá nhân. Họ có thể khó hợp tác và thường không dễ dàng chấp nhận sự khác biệt.</p>
        <p><strong>Tính cách:</strong> Họ có xu hướng thẳng thắn và có thể có lập trường mạnh mẽ về những gì họ tin tưởng. Đôi khi, họ có thể gặp khó khăn trong việc thỏa hiệp và làm hài lòng người khác.</p>
      `}
    </div>

    <p><strong>Neuroticism (N):</strong> ${traitCounts.N} - ${traitCounts.N >= 0 ? 'Thấp' : 'Cao'}</p>
    <div>
      ${traitCounts.N >= 0 ? `
        <p><strong>Điểm thấp:</strong> Người có điểm thấp trong yếu tố này rất bình tĩnh và có khả năng kiểm soát cảm xúc tốt. Họ ít khi bị lo lắng hoặc căng thẳng và có thể giữ được sự điềm tĩnh trong những tình huống khó khăn.</p>
        <p><strong>Tính cách:</strong> Họ không dễ bị ảnh hưởng bởi các tình huống căng thẳng và có thể duy trì sự ổn định cảm xúc trong mọi hoàn cảnh.</p>
      ` : `
        <p><strong>Điểm cao:</strong> Người có điểm cao trong yếu tố này dễ bị lo âu, căng thẳng và dễ bị ảnh hưởng bởi cảm xúc tiêu cực. Họ có thể cảm thấy lo lắng hoặc dễ bị tổn thương trong những tình huống căng thẳng.</p>
        <p><strong>Tính cách:</strong> Họ dễ bị rối loạn cảm xúc và đôi khi có thể cảm thấy thất vọng hoặc bất an về tương lai.</p>
      `}
    </div>
  `;

  resultContainer.appendChild(result);
}




  </script>
</body>
</html>
